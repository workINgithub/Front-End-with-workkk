<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    Array.prototype._reduce = function (callback, initialValue) {
      // 如果数组为空且没有提供initialValue，会抛出TypeError
      let array = this;
      let result = initialValue;
      for(let i = 0; i < array.length; i++) {
        if(i===0 && result === undefined) {
          result = array[0]
          continue
        }
        result = callback.call(array, result, array[i], i, array)
      }
      return result
    }

    let a = [1,[2,3],4]
    let r = a._reduce(function (accumulator,value,index,array) {
      accumulator = accumulator.concat(value)
      return accumulator
    },[])
    console.log(r)
  </script>
</body>
</html>