# table

table是一个天生的等高模型。类比excel中，表格最关键的视觉因素是border，所以很多css属性是为了修饰border。

## 插入机制
由于table整个DOM树的复杂性，浏览器在解析HTML文本，生成dom树的时候会有一个插入(容错)机制。

例如: 少写了一个tr元素
```html
  <table>
      <td>1</td>
      <td>2</td>
  </table>

  <!-- 实际生成的dom树 -->
  <table>
    <tbody>
      <tr>
        <td>1</td>
        <td>2</td>
      </tr>
    </tbody>
  </table>
```

## 表格中的层

table也有自己的层叠顺序，因为书写模式是西方的横向。所以优先级是单元格->行->列->表格。

## 单元格的边框

### 分离边框模型（默认模型）

这种模型下，表格中的每个单元格都与其他单元格相隔一定的距离，而且单元格之间的边框不会折叠在一起。

**border-spacing（比HTML属性cellspacing强大）**

可以控制单元表格间的间隙，与table元素的内边距也存在。


使用手册: 适用于table或table-inline的元素上, 对应的键值是横向在纵向。
```css
 table {
   border-spacing: 2px 3px;
 }
```

### 折叠边框模型

该模型就像HTML排布没有间距的单元格一样。

与分离边框区别
* border-collapse的属性值为collapse时，display属性的值为table或inline-table的元素不能有内边距padding，但是可以有外边距。换句话说，**表格四周的边框与最外层的单元格之间肯定没有间隔。**
* 单元格间没有间距,类似与块级元素外边距折叠一样，大的为边框宽度。

## 表格的尺寸

### 宽度

table-layout: auto | fixed;

#### 固定布局（即fixed)

比auto布局渲染速度快，布局宽度由表格、列、单元格的宽度决定。具体可以看css权威指南p759页
结论：

1. 表格的宽度将被设为表格的width值和各列宽度之和中比较大的那个。
2. 列宽由第一行的col元素的宽度和tbody第一行的td元素所控制。（fixed.html证明了）

因为第二个条件，我们可以形容每列的宽度只看第一行col或td。

### 自动布局(auto)

根据每个单元格的宽度而决定的。(可以说auto下的表格，就是通过列的最小宽度和最大宽度来计算的)

计算顺序
1. 计算一列中每个单元格的最小宽度和打最大宽度。
2. 计算各列的最小宽度和最大宽度。(百分数永远是最大宽度值)

如果列有百分数的宽度，假设百分宽度的列，有10%, 20%两列，那么另外的列就是占了70%宽度，所以另外的列宽度*3/7就是百分数宽度的列的宽度再分别乘以自己的列宽即可。

但从./auto.html的例子中看到，宽度最终是通过所有列的最小宽度来计算的，然后第二列取得是百分数的宽度（但不等于百分数宽度+border宽度76!== 75 + 2·），而不是50px的宽度。