# position: absolute

`absolute`这个属性其实有很多的奥秘。

### 包含块

它的包含块是由最近的position不为static的祖先元素（inline元素也可以）建立，一直没有则容纳块为根元素。

* inline元素（用的比较少，只是写个概念）
内联元素前后两个内联盒子围成的盒子。

* 块级元素边界是**padding-box**

### 容纳块对其的影响

1. `height: 100%`以及`height: inherit`的不同。
100%是第一个具有定位属性值的祖先元素的高度，而`inherit`则是单纯的父元素的高度继承。

2. 绝对定位元素的包裹性(很重要)

* **默认**最大的宽度等于包含块的宽度（width.html)

但如果你强制设置width还是有效果的。

还有一种奇怪的场景通过js脚本，我们设置一个元素为绝对定位，插入到body元素中，但它定位但位置居于浏览器的右边缘，为什么还是会有`一柱擎天`的情况。
此时它的包含块是html元素，那讲道理这个时候该元素的宽度应该是html的宽度，为什么内容还是产生了换行?
> 这是由于一个很大的left值，导致"包含块"的剩余空间不足，这相当于定位元素的默认最大宽度变的很小了，最终导致了该效果。[容纳块宽度为定位元素的默认最大宽度](https://demo.cssworld.cn/6/5-2.php)


### 相对无依赖absolute绝对定位

> absolute是非常独立的属性值，其样式和行为表现不依赖其他任何css属性就可以完成。

从not-relative.html文件中你就可以看到, 没有容纳块的绝对定位元素，它实际上就在原本的位置上（**但脱离了流的限制**）。

具体在看[张鑫旭老师的demo](https://demo.cssworld.cn/6/5-5.php)，因为里面的icon图标是"无依赖绝对定位",它本身就是跟在文字后面的，所以无论前面的文字如果调整（变长变短），icon图标都是在原本的位置上（但不在流里）。

这个特性我觉得在做badge的时候非常有用。

除了这个，css世界里还指出了几种用法:
* 超越常规布局的排版（输入框类的提示信息跟随输入框）
* 下拉列表的定位
* 占位符效果模拟

#### 进一步深入无依赖绝对定位

position: absolute的元素display计算值都是块状的，但其定位的位置和却和设置position: absolut时候的位置相关。
举个例子：span元素就会在同一行上，div元素则会换行。（通俗点，在自己原本的位置上，却脱离了流）


### text-align和absolute

position: absolute的元素，已经脱离了流，并且text-align作用到的是行内元素（position: absolute的元素已块状化）
那为什么在./text-align.html文件中，元素会剧中显示？

原因就是幽灵空白节点因为父元素的`text-align: center`的缘故，剧中显示了。而无依赖绝对定位的元素（必须是内联元素，还记得上面讲过元素的位置跟元素本身原本的位置有关）自然是跟随其后。

这种定位方式，是实现主窗体右侧的“返回顶部”以及“反馈”等小布局的实现。但最关键的是引出了overflow以及absolute的关系。

### absolute与overflow

> 绝对定位元素不总是被父级overflow属性剪裁，尤其当overflow在绝对定位元素及其包含块之间的时候。

换句话说，就是有overflow属性的元素不是定位元素，同时绝对定位元素和overflow容器之间也没有定位元素。
具体看下./overflow.html

### clip属性

> 剪裁属性clip要想起作用，元素必须是绝对定位或是固定定位。

用法`clip: rect(50px 50px 50px 50px)`

但这个属性已不被推荐(推荐使用了clip-path)，所以就不多做讨论。