# 2020年2月25日 学习日记

#### 堆排序

堆排序的主要思路是通过 堆这种数据结构的性质来进行排序。即父节点的值大于或小于两个子节点的值，所以也分为大顶堆和小顶堆。

下面是几个要注意的点。

1. 因为我们使用的数组长度(root的index是0) 故而 父节点和 子节点index的关系是  父: i , left: 2i+1 , right: 2i+2
2. 为什么堆化的时候 第一个入口index是 Math.floor((length -1) / 2)
例如
```
let mid = Math.floor((length-1)/2); //lenght = 一个数组的长度
```

length - 1我们知道 是数组的最后一个元素的index  她可能是左节点或右节点
所以她的父节点 通过这个公式去求解(根据性质1)

> Math.floor((2i+1 - 1)/2)  = i  或  Math.floor((2i+2-1) / 2 ) = i

**另外 要注意堆化要递归下去 ，因为你不知道 更换了父子节点后，是否仍满足于堆的性质。**

3. 最后建立大顶堆后 ，  把index=0的元素(最大值) 移到最后即可。另外得重新建立大顶堆(只需要从0开始建立即可，
因为剩余的都满足大顶堆性质除了交换过去的末尾元素)