# 学习日记 20年03月29日

#### 堆排序

牛客网做题的时候，遇到了这么一个问题。
> 堆排序中，初次建堆的时间复杂度是多少，以及排序的时间复杂度是多少。


1. 初次建堆复杂度是O(n)

我们可以回忆下，建堆的实际思想，就是从倒数第二层节点开始(因为叶子节点本身就符合大顶堆的性质)。
每个节点和左右节点判断，如果当前节点小于子节点，则交换。如果当前节点就是最大，则无需交换。如果是第一种情况，
破坏了子节点的大顶堆的性质，所以我们需要继续递归下去。

假设该二叉树是k个节点。那么高度近似n =  O(logK)

因此我们可以总结下 一个节点，假设它在倒数第三层上，最复杂的情况是 交换2次
那第三层有多少个节点呢？2^n-3
所以该层的复杂度是O( 2 * 2^n-3 )
堆化遍历了从倒数第二层到第一层的每个节点，我们求和。

```
sum = 1 * 2^n-2 + 2 * 2^n-3 + ... + n-1* 2^0
```
把系数都近似于常数 1 ，然后把n = O(logK)带入 我们发现这是一个等比数列求和。
最后化简 O(k/2 - 1) => O(k)

所以初次堆化的过程是O(k)


2. 排序过程

那排序过程每次都需要重建堆的时间复杂度是h-1, 因为从大顶堆第一层节点开始，然后交换h-1层
所以这个过程是O(logk),那有k个节点，也就是重复k次
所以最后的复杂度就是O(klogk)